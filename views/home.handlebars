<div class="search-section">
  <form action="/" method="GET">
    <select id="search_pokemon" name="search">
      <option value="">Search existing trades</option>
      {{#each pokemon}}
        <option value="{{this.name}}">{{this.name}}</option>
      {{/each}}
    </select>
    <button type="submit">Search</button>
  </form>
  
  <a href="/create-trade">
    <button>Post a Trade</button>
  </a>
</div>

{{!-- Adds the cards for the recent trades to the home page --}}
<div class="recent-trades">
    <h2>Recently Posted Trades</h2>
    {{#if trades}}
    {{#each trades}}
        <div class="trade-card">
           <p><strong>Wants:</strong></p>
           <div class="pokemon-list">
            {{#each this.wantedPokemon}}
                <div class="pokemon-item">
                    <img src="{{this.sprite_url}}" alt="{{this.name}}" class="pokemon-sprite">
                    <span>{{this.name}}</span>
                </div>
            {{/each}}
            </div>
           
           <p><strong>Offering:</strong></p>
           <div class="pokemon-list"> 
            {{#each this.offeredPokemon}}
                <div class="pokemon-item">
                    <img src="{{this.sprite_url}}" alt="{{this.name}}" class="pokemon-sprite">
                    <span>{{this.name}}</span>
                </div>
            {{/each}}
            </div>

            {{#if this.notes}}
            <p><strong>Notes:</strong>
                {{this.notes}}</p>
            {{/if}}
            
            {{!-- This will bring the user to the persons profile when clicking the name --}}
            <p><strong>Posted by:</strong> <a href="/profile/{{this.user.pogo_username}}">{{this.user.pogo_username}}</a></p>
        </div>
    {{/each}}
    {{else}}
     <p>No trades yet! Be the first to post one.</p>
    {{/if}}
</div>

{{!-- Importing choices to make the search a searchable dropdown --}}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/choices.js/public/assets/styles/choices.min.css">
<script src="https://cdn.jsdelivr.net/npm/choices.js/public/assets/scripts/choices.min.js"></script>
<script>
  document.addEventListener('DOMContentLoaded', function() {
    const element = document.querySelector('#search_pokemon');
    if (element) {
      const searchChoices = new Choices(element, {
        searchEnabled: true,
        searchPlaceholderValue: 'Type to search...'
      });
      console.log('Choices.js initialized!');
    } else {
      console.error('Could not find #search_pokemon element');
    }
  });
</script>